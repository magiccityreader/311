<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <title>Magic City Reader: Birmingham, AL 311 Service Request Map - Interactive City Services Dashboard</title>
    <link rel="icon" type="image/png" sizes="32x32" href="./favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="./favicon.ico">
    <link rel="shortcut icon" href="./favicon.ico">
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Magic City Reader over 20,000 Birmingham, AL 311 service requests from January-October 2025 in this interactive map. View data on city services, waste management, infrastructure issues, and community needs across Birmingham, AL neighborhoods.">
    <meta name="keywords" content="Magic City Reader, MCR, Birmingham, AL 311, Birmingham, AL city services, Birmingham, AL municipal services, Birmingham, AL service requests, Birmingham, AL infrastructure, Birmingham, AL waste management, Birmingham, AL neighborhoods, Birmingham, AL community services, Birmingham, AL city data, Birmingham, AL government services">
    <meta name="author" content="Magic City Reader">
    <meta name="robots" content="index, follow">
    <meta name="language" content="en-US">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Magic City Reader: Birmingham, AL 311 Service Request Map - Interactive City Services Dashboard">
    <meta property="og:description" content="Magic City Reader over 20,000 Birmingham, AL 311 service requests with interactive maps, heatmaps, and analytics. Track city services, infrastructure issues, and community needs across Birmingham, AL neighborhoods.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://your-domain.example/311/">
    <meta property="og:image" content="https://your-domain.example/311/images/birmingham_311_map_preview.jpg">
    <meta property="og:site_name" content="Magic City Reader - Birmingham, AL 311 Database Clone">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Magic City Reader: Birmingham, AL 311 Interactive Service Map">
    <meta name="twitter:description" content="MCR Birmingham, AL city services data with 20,000+ service requests mapped across neighborhoods">
    <meta name="twitter:image" content="https://your-domain.example/311/images/birmingham_311_twitter_card.jpg">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="index.html">
    
    <!-- Additional Meta Tags -->
    <meta name="geo.region" content="US-AL">
    <meta name="geo.placename" content="Birmingham">
    <meta name="geo.position" content="33.5207;-86.8025">
    <meta name="ICBM" content="33.5207, -86.8025">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="./css/leaflet-1.9.4.css" as="style">
    <link rel="preload" href="./js/leaflet-1.9.4.js" as="script">
    
    <!-- External CSS -->
    <link rel="stylesheet" href="./css/leaflet-1.9.4.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Custom Helvetica Now Micro Fonts -->
    <style>
        @font-face {
            font-family: 'Helvetica Now Micro';
            src: url('fonts/HelveticaNowMicro-Regular.woff2') format('woff2');
            font-weight: 400;
            font-style: normal;
        }
        @font-face {
            font-family: 'Helvetica Now Micro';
            src: url('fonts/HelveticaNowMicro-Medium.woff2') format('woff2');
            font-weight: 500;
            font-style: normal;
        }
        @font-face {
            font-family: 'Helvetica Now Micro';
            src: url('fonts/HelveticaNowMicro-Bold.woff2') format('woff2');
            font-weight: 700;
        }
        @font-face {
            font-family: 'Helvetica Now Pro Display XBlk';
            src: url('fonts/HelveticaNowDisplay-XBlk.woff2') format('woff2');
            font-weight: 213;
            font-style: normal;
        }
        @font-face {
            font-family: 'Helvetica Now Display Xtra Black';
            src: url('fonts/HelveticaNowDisplay-XBlk.woff2') format('woff2');
            font-weight: 900;
            font-style: normal;
        }
        @font-face {
            font-family: 'Helvetica Now Text';
            src: url('fonts/HelveticaNowText-Regular.woff2') format('woff2');
            font-weight: 400;
            font-style: normal;
        }
    </style>
    
    <!-- Local CSS -->
    <link rel="stylesheet" href="./css/styles-optimized.css">
    <link rel="stylesheet" href="./css/simplified-layer-control.css">
    
    <!-- Photo layer styles -->
    <style>
        .photo-thumbnail-marker {
            background: none !important;
            border: none !important;
        }
        
        .photo-thumbnail {
            transition: all 0.2s ease;
        }
        
        .photo-thumbnail:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(0,0,0,0.4) !important;
        }
        
        #photo-modal {
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .photo-thumbnail-marker .leaflet-marker-icon {
            background: none !important;
            border: none !important;
        }
        
        .photo-thumbnail {
            width: 40px;
            height: 40px;
            border: 2px solid #ffffff;
            border-radius: 6px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(255, 255, 255, 0.3);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            cursor: pointer;
        }
        
        .photo-thumbnail:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(255, 255, 255, 0.5);
        }
        
        /* Issue hover marker styles */
        .issue-hover-marker {
            cursor: pointer;
            pointer-events: auto;
        }
        
        .issue-hover-marker div {
            pointer-events: auto;
            cursor: pointer;
        }
        
        .issue-hover-circle {
            pointer-events: none;
            z-index: 1000;
            transition: all 0.2s ease;
        }
        
        .issue-hover-circle:hover {
            stroke-width: 3px;
        }
    
        /* Timeline styles for expanded issue modal */
        #timeline-container {
            max-height: 400px;
            overflow-y: auto;
            padding-right: 5px;
        }
        
        #timeline-container::-webkit-scrollbar {
            width: 6px;
        }
        
        #timeline-container::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 3px;
        }
        
        #timeline-container::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
        }
        
        #timeline-container::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .timeline-event {
            margin-bottom: 15px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
            transition: background 0.2s ease;
        }
        
        .timeline-event:hover {
            background: rgba(255, 255, 255, 0.08);
        }
        
        .timeline-event-comment {
            border-left: 3px solid #4A9EFF;
        }
        
        .timeline-event-status {
            border-left: 3px solid #fff001;
        }
        
        /* Issue modal styles */
        #issue-modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            cursor: pointer;
        }
        
        #issue-modal .modal-content {
            cursor: default;
        }
</style>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    
    <!-- Leaflet configuration -->
    <script>
        L_NO_TOUCH = false;
        L_DISABLE_3D = false;
</script>
</head>

<body class="dark-theme">
    <div id="map_5a5dcd89f74d5563ab698edfc46a7723"></div>
    
    
    <!-- Hamburger Menu for Mobile -->
    <div id="hamburger-menu" class="hamburger-menu">
        <div class="hamburger-line"></div>
        <div class="hamburger-line"></div>
        <div class="hamburger-line"></div>
    </div>
    
    <!-- Right Sidebar -->
    <div id="heatmap-sidebar" style="position: fixed; 
                top: 0; right: 0; width: 320px; height: 100vh; 
                background-color: #0d1117; border-left: 3px solid #21262d; z-index: 1000; 
                font-size: 12px; padding: 15px; box-shadow: -4px 0 20px rgba(0,0,0,0.6);
                overflow-y: auto; backdrop-filter: blur(10px);">
        
        <!-- Content will be added here by JavaScript -->
        <div id="sidebar-content">
            <div style="font-size: 11px; color: #888; margin-bottom: 15px;">
                Loading analytics data...
            </div>
        </div>
    </div>
    
    <!-- MCR Logo and Header Text -->
    <div id="mcr-logo">
        <div class="logo-container">
        <img src="./images/MCR.png" alt="MCR Logo" class="mcr-logo-img">
        <div class="header-links">
            <a href="https://mcr.pub/subscribe?utm_campaign=311" class="header-link">SUBSCRIBE</a>
            <a href="https://mcr.pub/advertise?utm_campaign=311" class="header-link">ADVERTISE</a>
        </div>
        </div>
        <div class="header-text">
            <div class="volume-text">VOL. 1, NO. 2 NOVEMBER 2025</div>
            <div class="birmingham-title-text">Birmingham 311</div>
            <div class="database-clone-text">database clone</div>
            <img src="./images/residents-submitted-text.svg" alt="Residents submitted more than 8,000 requests for city services from January through October." class="description-text-svg">
        </div>
    </div>
    
    <!-- External JavaScript (loaded with defer for better performance) -->
    <script src="./js/leaflet-1.9.4.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" defer></script>
    <script src="./js/leaflet-heat.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6.5.0/turf.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" defer></script>
    
    <!-- Local JavaScript -->
    <script src="./js/simplified-layer-control.js" defer></script>
    <script src="./js/main-311-api.js" defer></script>
    <!-- Unregister any existing Service Workers -->
    <script>
        if ("serviceWorker" in navigator) {
            navigator.serviceWorker.getRegistrations().then(function(registrations) {
                for (let registration of registrations) {
                    registration.unregister().then(function() {
                        console.log("Service Worker unregistered");
                    });
                }
            });
        }
    </script>
    
    
    <!-- Photo Modal -->
    <div id="photo-modal" class="modal" style="display: none; position: fixed; z-index: 10000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.8); cursor: pointer;">
        <div style="position: relative; margin: 2% auto; max-width: 90%; max-height: 90%; text-align: center; cursor: pointer;">
            <img id="modal-image" style="max-width: 100%; max-height: 100%; border-radius: 8px; cursor: default;">
        </div>
    </div>
</body>
</html>
